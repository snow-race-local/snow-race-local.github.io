(function(t){function e(e){for(var s,r,a=e[0],l=e[1],c=e[2],u=0,p=[];u<a.length;u++)r=a[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);m&&m(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),o()}function o(){for(var t,e=0;e<n.length;e++){for(var o=n[e],s=!0,a=1;a<o.length;a++){var l=o[a];0!==i[l]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=o[0]))}return t}var s={},i={app:0},n=[];function r(e){if(s[e])return s[e].exports;var o=s[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=s,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(o,s,function(e){return t[e]}.bind(null,s));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var m=l;n.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var s=o("1356"),i=o.n(s);i.a},"104a":function(t,e,o){},1356:function(t,e,o){},4678:function(t,e,o){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=n(t);return o(e)}function n(t){if(!o.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=n,t.exports=i,i.id="4678"},4993:function(t,e,o){"use strict";var s=o("104a"),i=o.n(s);i.a},"56d7":function(t,e,o){"use strict";o.r(e);var s=o("2b0e"),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-app",[o("v-navigation-drawer",{staticClass:"hidden-sm-and-down",attrs:{app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[o("app-menu")],1),o("v-app-bar",{attrs:{app:"",color:"light-blue lighten-2",dark:""}},[o("v-icon",{staticClass:"hidden-sm-and-down",staticStyle:{"margin-right":"10px"},on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}},[t._v("menu")]),o("v-toolbar-title",[t._v("Старт-финиш "),t.$store.state.offline?o("span",[t._v("офлайн")]):t._e(),o("pwa-install",[t._v("Установить")])],1)],1),o("v-content",[o("v-container",[o("router-view")],1)],1),o("app-bottom-menu",{staticClass:"hidden-md-and-up"}),o("data-uploader")],1)},n=[],r={name:"mainApp",data:()=>({drawer:!1}),mounted(){let t=360,e=window.innerWidth||document.body.clientWidth;if(e<t){let e=screen.width/t;document.querySelector('meta[name="viewport"]').setAttribute("content","width="+t+", initial-scale="+e)}},methods:{logShow(){}}},a=r,l=(o("034f"),o("2877")),c=o("6544"),m=o.n(c),u=o("7496"),p=o("40dc"),d=o("a523"),h=o("a75b"),v=o("132d"),f=o("f774"),g=o("2a7f"),y=Object(l["a"])(a,i,n,!1,null,null,null),C=y.exports;m()(y,{VApp:u["a"],VAppBar:p["a"],VContainer:d["a"],VContent:h["a"],VIcon:v["a"],VNavigationDrawer:f["a"],VToolbarTitle:g["a"]});var b=o("8c4f"),x=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",[o("v-layout",{attrs:{row:""}},[o("v-flex",{attrs:{xs12:""}},[o("transition",{attrs:{name:"fade"}},[o("div",[o("v-layout",{attrs:{"justify-center":""}},[o("h1",{staticClass:"big-time hidden-sm-and-down",attrs:{align:"center"}},[t._v("\n              "+t._s(t.displayTime)+"\n            ")]),o("h1",{staticClass:"big-time-phone hidden-md-and-up",attrs:{align:"center"}},[t._v("\n              "+t._s(t.displayTime)+"\n            ")])])],1)]),o("transition",{attrs:{name:"fade"}},[t.sportsmens.length>0?o("div",[o("v-card",[o("v-card-text",[o("v-row",[o("v-col",{staticClass:"col-12 col-md-4",attrs:{align:"center"}},[null===t.$store.state.competitions[t.$store.state.currentCompetitionPos].sportsmanOnRaceId?o("v-btn",{staticStyle:{width:"100%"},attrs:{large:"",color:"primary"},on:{click:function(e){return t.start()}}},[t._v("Старт")]):o("v-btn",{staticStyle:{width:"100%"},attrs:{large:"",color:"primary"},on:{click:function(e){return t.finish()}}},[t._v("Финиш")])],1),o("v-col",{staticClass:"col-12 col-md-4",attrs:{align:"center"}},[o("v-btn",{staticClass:"white--text",staticStyle:{width:"100%"},attrs:{large:"",color:"orange darken-1"},on:{click:function(e){return t.passSportsman(t.sportsmens[0].id)}}},[null===t.$store.state.competitions[t.$store.state.currentCompetitionPos].sportsmanOnRaceId?o("span",[t._v("Пропустить")]):o("span",[t._v("Перестартовать")])])],1),o("v-col",{staticClass:"col-12 col-md-4",attrs:{align:"center"}},[o("v-btn",{staticStyle:{width:"100%"},attrs:{large:"",color:"error"},on:{click:function(e){return t.disqalify(t.sportsmens[0].id)}}},[t._v("Сход")])],1)],1),o("h2",{staticStyle:{margin:"0px"}},[t._v("Стартует")]),o("v-row",{staticStyle:{"white-space":"nowrap"},attrs:{align:"center"}},[o("v-col",{staticClass:"t-shirt-col"},[o("div",{staticClass:"t-shirt"},[o("v-layout",{attrs:{"justify-center":""}},[o("span",{staticClass:"white--text headline"},[t._v(t._s(t.sportsmens[0].id))])])],1)]),o("v-col",{staticClass:"black--text name-time-col"},[o("v-row",{attrs:{"no-gutters":""}},[o("h2",{staticClass:"name"},[t._v(t._s(t.sportsmens[0].name))])]),o("v-row",{attrs:{"no-gutters":""}},[o("v-col",{staticClass:"black--text mini-time",attrs:{cols:"6"}},[null===t.sportsmens[0].time1&&null!==t.$store.state.competitions[t.$store.state.currentCompetitionPos].currentRaceTime?o("span",[t._v(t._s(t.formatTime(t.$store.state.competitions[t.$store.state.currentCompetitionPos].currentRaceTime)))]):o("span",[t._v(t._s(t.formatTime(t.sportsmens[0].t1)))])]),o("v-col",{staticClass:"black--text mini-time",attrs:{cols:"6"}},[null!==t.sportsmens[0].time1&&null===t.sportsmens[0].time2&&null!==t.$store.state.competitions[t.$store.state.currentCompetitionPos].currentRaceTime?o("span",[t._v(t._s(t.formatTime(t.$store.state.competitions[t.$store.state.currentCompetitionPos].currentRaceTime)))]):o("span",[t._v(t._s(t.formatTime(t.sportsmens[0].t2)))])])],1)],1),o("v-col",{staticClass:"icon"},[o("v-avatar",{attrs:{color:"orange",size:"30"}},[o("div",{staticClass:"white--text"},[o("v-icon",{staticClass:"white--text",on:{click:function(e){return t.passSportsman(t.sportsmens[0].id)}}},[t._v("hourglass_empty")])],1)])],1)],1),o("v-divider"),t.sportsmens.length>1?o("div",[o("h2",{staticStyle:{margin:"0px"}},[t._v("Готовятся")]),t._l(t.sportsmens,function(e,s){return 0!==s?o("div",{key:e.id},[o("v-row",{staticStyle:{"white-space":"nowrap"},attrs:{align:"center"}},[o("v-col",{staticClass:"t-shirt-col"},[o("div",{staticClass:"t-shirt"},[o("v-layout",{attrs:{"justify-center":""}},[o("span",{staticClass:"white--text headline"},[t._v(t._s(e.id))])])],1)]),o("v-col",{staticClass:"black--text name-time-col"},[o("v-row",{attrs:{"no-gutters":""}},[o("h2",{staticClass:"name"},[t._v(t._s(e.name))])]),o("v-row",{attrs:{"no-gutters":""}},[o("v-col",{staticClass:"black--text mini-time",attrs:{cols:"6"}},[o("span",[t._v(t._s(t.formatTime(e.t1)))])]),o("v-col",{staticClass:"black--text mini-time",attrs:{cols:"6"}},[o("span",[t._v(t._s(t.formatTime(e.t2)))])])],1)],1),o("v-col",{staticClass:"icon"},[o("v-avatar",{attrs:{color:"orange",size:"30"}},[o("div",{staticClass:"white--text"},[o("v-icon",{staticClass:"white--text",on:{click:function(o){return t.passSportsman(e.id)}}},[t._v("hourglass_empty")])],1)])],1)],1),s<t.sportsmens.length-1?o("v-divider"):t._e()],1):t._e()})],2):t._e()],1)],1)],1):o("div",[o("v-row",{attrs:{align:"center"}},[o("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[o("v-btn",{staticStyle:{width:"100%"},attrs:{large:"",color:"primary",to:"/results"}},[t._v("Результаты")])],1)],1)],1)])],1)],1)],1)},$=[],_=o("739d");const T=o("c1df");function w(t){t.t1="--.--",t.t2="--.--",null!==t.time1&&(t.t1=t.time1),null!==t.time2&&(t.t2=t.time2),0===t.time1&&(t.t1=t.disqualifyType1),0===t.time2&&(t.t2=t.disqualifyType2)}T().format();var P={data:()=>({pressedKeys:{48:!1,49:!1,56:!1}}),computed:{sportsmens(){let t=[...this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmens],e=this.$store.state.competitions[this.$store.state.currentCompetitionPos].queue;return console.log("t1"),t.forEach(t=>{t.queuePos=e.indexOf(t.id)}),console.log("t2"),t=t.filter(t=>null===t.time1||null===t.time2),t.sort((t,e)=>{return t.queuePos>e.queuePos?1:-1}),t.forEach(t=>{w(t)}),console.info("recalculate"),t},displayTime(){return null==this.$store.state.competitions[this.$store.state.currentCompetitionPos].lastSportsman&&null==this.$store.state.competitions[this.$store.state.currentCompetitionPos].currentRaceTime?"":null!=this.$store.state.competitions[this.$store.state.currentCompetitionPos].currentRaceTime&&"--.--"!==this.$store.state.competitions[this.$store.state.currentCompetitionPos].currentRaceTime?this.formatTime(this.$store.state.competitions[this.$store.state.currentCompetitionPos].currentRaceTime):null!=this.$store.state.competitions[this.$store.state.currentCompetitionPos].lastSportsman.t2&&"--.--"!==this.$store.state.competitions[this.$store.state.currentCompetitionPos].lastSportsman.t2?this.formatTime(this.$store.state.competitions[this.$store.state.currentCompetitionPos].lastSportsman.t2):this.formatTime(this.$store.state.competitions[this.$store.state.currentCompetitionPos].lastSportsman.t1)}},methods:{formatTime(t=""){return""==t?t:t<60?t:t<3600?Math.floor(t/60)+"."+(t-60*Math.floor(t/60)).toFixed(3):t},saveThisCompetition(){console.log("saveThisCompetition"),this.$store.dispatch("saveCompetitionChange",this.$store.state.competitions[this.$store.state.currentCompetitionPos])},addThisCompetition(){console.log("addThisCompetition"),this.$store.dispatch("addCompetition",this.$store.state.competitions[this.$store.state.currentCompetitionPos])},start(){if(null!==this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmanOnRaceId||this.sportsmens.length<1)return 0;let t=new Date;this.$store.state.competitions[this.$store.state.currentCompetitionPos].lastStartTime=t;let e=this.sportsmens[0].id;console.log("t3"),this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmanOnRaceId=e,this.$store.state.competitions[this.$store.state.currentCompetitionPos].currentRaceTime=0,this.$store.state.competitions[this.$store.state.currentCompetitionPos].interval=setInterval(()=>{this.$store.state.competitions[this.$store.state.currentCompetitionPos].currentRaceTime=Math.round(10*(this.$store.state.competitions[this.$store.state.currentCompetitionPos].currentRaceTime+.1))/10},100),this.$store.state.t++,console.log(this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmanOnRaceId)},finish(t=!1){console.log("finish");let e=null;if(null===this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmanOnRaceId){if(!0!==t||this.sportsmens.length<1)return 0;e="DNS",console.log("DNS"),this.start()}let o=new Date;console.log("test"),console.log(this.$store.state.competitions[this.$store.state.currentCompetitionPos].lastStartTime instanceof Date),this.$store.state.competitions[this.$store.state.currentCompetitionPos].lastStartTime instanceof Date||(console.log("reaper"),this.$store.state.competitions[this.$store.state.currentCompetitionPos].lastStartTime=new Date(this.$store.state.competitions[this.$store.state.currentCompetitionPos].lastStartTime)),console.log(this.$store.state.competitions[this.$store.state.currentCompetitionPos].lastStartTime instanceof Date);let s=(o.getTime()-this.$store.state.competitions[this.$store.state.currentCompetitionPos].lastStartTime.getTime())/1e3;console.log("raceTime "+s);let i=this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmens.find(t=>t.id===this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmanOnRaceId);!0===t&&(s=0,null===e&&(e="DNF")),console.log("t4"),null===i.time1?(i.time1=s,i.disqualifyType1=e,console.log("set time1 to"),console.log(i),console.log("спортсмены"),console.log(this.sportsmens)):null===i.time2&&(i.time2=s,i.disqualifyType2=e),w(i),this.$store.state.competitions[this.$store.state.currentCompetitionPos].lastSportsman=i,this.$store.state.competitions[this.$store.state.currentCompetitionPos].queue=this.$store.state.competitions[this.$store.state.currentCompetitionPos].queue.splice(1).concat(this.$store.state.competitions[this.$store.state.currentCompetitionPos].queue),this.clearStart(),this.$store.state.t=s,this.saveThisCompetition()},passSportsman(t){console.log("пропускаем спортсмена "+t),this.$store.state.competitions[this.$store.state.currentCompetitionPos].queue.sort((e,o)=>{return e.id===t?1:o===t?-1:0}),this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmanOnRaceId===t&&this.clearStart()},disqalify(t){console.log("спортсмена сошел "+t),this.finish(!0),console.log(this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmanOnRaceId),console.log(t),this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmanOnRaceId===t&&this.clearStart()},checkKeyboard(){!0===this.pressedKeys[48]&&(!0===this.pressedKeys[49]?(console.log("start-keyboard"),this.start()):!0===this.pressedKeys[56]&&(console.log("finish-keyboard"),this.finish()))},clearStart(){this.$store.state.competitions[this.$store.state.currentCompetitionPos].lastStartTime=null,this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmanOnRaceId=null,this.$store.state.competitions[this.$store.state.currentCompetitionPos].currentRaceTime=null,clearInterval(this.$store.state.competitions[this.$store.state.currentCompetitionPos].interval),this.$store.state.competitions[this.$store.state.currentCompetitionPos].interval=null},keydownMy(t){console.log("hi "+t.keyCode+" "+this.$route.path),"/start"!==this.$route.path||49!==t.keyCode&&56!==t.keyCode&&48!==t.keyCode||(this.pressedKeys[t.keyCode]=!0,this.checkKeyboard())},keyupMy(t){"/start"!==this.$route.path||49!==t.keyCode&&56!==t.keyCode&&48!==t.keyCode||(this.pressedKeys[t.keyCode]=!1)}},mounted(){if(!0===this.$store.state.isDtmf){let t=new _["DTMF"].Receiver;navigator.getUserMedia({audio:!0},e=>{t.start(e,t=>{"1"===t&&(console.log("start-dtmf"),this.start()),"8"===t&&(console.log("finish-dtmf"),this.finish())})},function(t){console.error(t)})}window.addEventListener("keydown",this.keydownMy),window.addEventListener("keyup",this.keyupMy)},destroyed(){console.log("destroy"),window.removeEventListener("keydown",this.keydownMy),window.removeEventListener("keyup",this.keyupMy)}},j=P,S=(o("4993"),o("8212")),k=o("8336"),I=o("b0af"),q=o("99d9"),O=o("62ad"),V=o("ce7e"),N=o("0e8f"),R=o("a722"),z=o("0fd9"),D=Object(l["a"])(j,x,$,!1,null,null,null),M=D.exports;m()(D,{VAvatar:S["a"],VBtn:k["a"],VCard:I["a"],VCardText:q["a"],VCol:O["a"],VContainer:d["a"],VDivider:V["a"],VFlex:N["a"],VIcon:v["a"],VLayout:R["a"],VRow:z["a"]});var F=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",[o("v-layout",{attrs:{row:""}},[o("v-flex",{attrs:{xs12:""}},[t.$store.state.competitions[t.$store.state.currentCompetitionPos].groups&&t.$store.state.competitions[t.$store.state.currentCompetitionPos].groups.length>0?o("h2",[t._v("Настройки соревнования")]):t._e(),t.$store.state.competitions[t.$store.state.currentCompetitionPos].groups&&t.$store.state.competitions[t.$store.state.currentCompetitionPos].groups.length>0?o("v-card",[o("v-simple-table",[o("thead",[o("tr",[o("th",{staticClass:"text-left"},[t._v("Номер майки")]),o("th",{staticClass:"text-left"},[t._v("Имя")]),o("th",{staticClass:"text-left"},[t._v("Действия")])])]),o("tbody",t._l(t.$store.state.competitions[t.$store.state.currentCompetitionPos].sportsmens,function(e){return o("tr",{key:e.id},[o("td",{staticClass:"td-100"},[t._v(t._s(e.id))]),o("td",{staticClass:"td-max"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"sportsman.name"}],staticStyle:{width:"100%"},attrs:{type:"text"},domProps:{value:e.name},on:{input:function(o){o.target.composing||t.$set(e,"name",o.target.value)}}})]),o("td",{staticClass:"d-sm-none td-100"},[o("a",{on:{click:function(o){return t.editSportsman(e.id)}}},[o("v-icon",{attrs:{large:"",color:"blue"}},[t._v("edit")])],1),o("a",{on:{click:function(o){return t.deleteSportsman(e.id)}}},[o("v-icon",{attrs:{large:"",color:"red"}},[t._v("delete_forever")])],1)]),o("td",{staticClass:"d-none d-sm-flex align-center"},[o("v-btn",{staticStyle:{"margin-right":"10px"},attrs:{color:"warning"},on:{click:function(o){return t.editSportsman(e.id)}}},[t._v("Изменить")]),o("v-btn",{attrs:{color:"error"},on:{click:function(o){return t.deleteSportsman(e.id)}}},[t._v("Удалить")])],1)])}),0)])],1):t._e(),t.$store.state.competitions[t.$store.state.currentCompetitionPos].groups&&t.$store.state.competitions[t.$store.state.currentCompetitionPos].groups.length>0?o("h2",[t._v("Добавить спортсмена")]):t._e(),t.$store.state.competitions[t.$store.state.currentCompetitionPos].groups&&t.$store.state.competitions[t.$store.state.currentCompetitionPos].groups.length>0?o("v-card",[o("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[o("v-container",[o("v-row",[o("v-col",{staticClass:"col-12 col-sm-3"},[o("v-text-field",{attrs:{rules:t.numberRules,label:"Номер майки",required:""},on:{input:function(e){return t.fixNumber()}},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1),o("v-col",{staticClass:"col-12 col-sm-3"},[o("v-select",{attrs:{items:t.groupIds,label:"Номер группы"},model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}})],1),o("v-col",{staticClass:"col-12 col-sm-6"},[o("v-text-field",{attrs:{rules:t.nameRules,label:"Имя",required:""},on:{input:function(e){return t.fixName()}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),o("v-col",{staticClass:"col-12 text-center text-sm-right",staticStyle:{"margin-top":"10px"}},[o("v-btn",{attrs:{color:"primary",block:"",disabled:!t.valid||!t.groupId},on:{click:function(e){return t.addSprtsman()}}},[t._v("Добавить")])],1),o("v-col",{staticClass:"col-12 col-sm-6"},[o("v-text-field",{attrs:{label:"Год рождения"},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}})],1),o("v-col",{staticClass:"col-12 col-sm-6"},[o("v-text-field",{attrs:{label:"Рус/ФИС КОД"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1),o("v-col",{staticClass:"col-12 col-sm-6"},[o("v-text-field",{attrs:{label:"Субъект РФ"},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}})],1),o("v-col",{staticClass:"col-12 col-sm-6"},[o("v-text-field",{attrs:{label:"Звание/разрд"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],1)],1)],1)],1):t._e(),t.$store.state.competitions[t.$store.state.currentCompetitionPos].groups&&t.$store.state.competitions[t.$store.state.currentCompetitionPos].groups.length>0?o("h2",[t._v("Группы")]):t._e(),t.$store.state.competitions[t.$store.state.currentCompetitionPos].groups&&t.$store.state.competitions[t.$store.state.currentCompetitionPos].groups.length>0?o("v-card",[o("v-simple-table",[o("thead",[o("tr",[o("th",{staticClass:"text-left"},[t._v("Номер")]),o("th",{staticClass:"text-left"},[t._v("Название")])])]),o("tbody",t._l(t.$store.state.competitions[t.$store.state.currentCompetitionPos].groups,function(e){return o("tr",{key:e.id},[o("td",{staticClass:"td-100"},[t._v(t._s(e.id))]),o("td",{staticClass:"td-max"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"group.name"}],staticStyle:{width:"100%"},attrs:{type:"text"},domProps:{value:e.name},on:{input:function(o){o.target.composing||t.$set(e,"name",o.target.value)}}})])])}),0)])],1):t._e(),o("h2",[t._v("Добавить группу")]),o("v-card",[o("v-form",[o("v-container",[o("v-row",[o("v-col",{staticClass:"col-12 col-md-9"},[o("v-text-field",{attrs:{label:"Название",required:""},model:{value:t.groupName,callback:function(e){t.groupName=e},expression:"groupName"}})],1),o("v-col",{staticClass:"col-12 col-md-3 text-center text-sm-right",staticStyle:{"margin-top":"10px"}},[o("v-btn",{attrs:{color:"primary",disabled:!t.groupName.length},on:{click:function(e){return t.addGroup()}}},[t._v("Добавить")])],1)],1)],1)],1)],1)],1)],1),t.changeSportsmen?o("v-bottom-sheet",{model:{value:t.sheet,callback:function(e){t.sheet=e},expression:"sheet"}},[o("v-sheet",{staticClass:"text-center"},[o("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[o("v-container",[o("v-row",[o("v-col",{staticClass:"col-3 col-sm-3"},[o("v-text-field",{attrs:{rules:t.numberRules,label:"Номер майки",disabled:""},model:{value:t.changeSportsmen.id,callback:function(e){t.$set(t.changeSportsmen,"id",e)},expression:"changeSportsmen.id"}})],1),o("v-col",{staticClass:"col-9 col-sm-9"},[o("v-text-field",{attrs:{rules:t.nameRules,label:"Имя"},on:{blur:t.saveCompetition},model:{value:t.changeSportsmen.name,callback:function(e){t.$set(t.changeSportsmen,"name",e)},expression:"changeSportsmen.name"}})],1),o("v-col",{staticClass:"col-4 col-sm-4"},[o("v-text-field",{attrs:{label:"Год рождения"},on:{blur:t.saveCompetition},model:{value:t.changeSportsmen.year,callback:function(e){t.$set(t.changeSportsmen,"year",e)},expression:"changeSportsmen.year"}})],1),o("v-col",{staticClass:"col-4 col-sm-4"},[o("v-text-field",{attrs:{label:"Рус/ФИС КОД"},on:{blur:t.saveCompetition},model:{value:t.changeSportsmen.code,callback:function(e){t.$set(t.changeSportsmen,"code",e)},expression:"changeSportsmen.code"}})],1),o("v-col",{staticClass:"col-4 col-sm-4"},[o("v-text-field",{attrs:{label:"Номер группы"},on:{blur:t.saveCompetition},model:{value:t.changeSportsmen.groupId,callback:function(e){t.$set(t.changeSportsmen,"groupId",e)},expression:"changeSportsmen.groupId"}})],1),o("v-col",{staticClass:"col-6 col-sm-6"},[o("v-text-field",{attrs:{label:"Субъект РФ"},on:{blur:t.saveCompetition},model:{value:t.changeSportsmen.city,callback:function(e){t.$set(t.changeSportsmen,"city",e)},expression:"changeSportsmen.city"}})],1),o("v-col",{staticClass:"col-6 col-sm-6"},[o("v-text-field",{attrs:{label:"Звание/разрд"},on:{blur:t.saveCompetition},model:{value:t.changeSportsmen.title,callback:function(e){t.$set(t.changeSportsmen,"title",e)},expression:"changeSportsmen.title"}})],1)],1)],1)],1),o("v-btn",{attrs:{absolute:"",dark:"",fab:"",top:"",right:"",color:"blue"},on:{click:function(e){t.sheet=!t.sheet}}},[o("v-icon",[t._v("done")])],1)],1)],1):t._e()],1)},E=[],L={data:()=>({groupName:"",valid:!1,number:"",name:"",year:"",code:"",groupId:"",city:"",title:"",nameRules:[t=>!!t||"Введите имя спортсмена",t=>t.length<=50||"Не более 50 знаков"],sheet:!1,changeSportsmenId:null,changeSportsmen:null}),computed:{groupIds(){let t=[];return this.$store.state.competitions[this.$store.state.currentCompetitionPos].groups.forEach(e=>{t.push(e.id)}),t},isFormValid(){return!1!==this.valid&&-1===this.$store.state.competitions[this.$store.state.currentCompetitionPos].queue.indexOf(parseInt(this.number))},numberRules(){return[t=>!!t||"Введите номер майки",t=>t.length<=3||"Не более 3 цифр",t=>{return-1===this.$store.state.competitions[this.$store.state.currentCompetitionPos].queue.indexOf(parseInt(t))||"Номер уже используется"}]}},methods:{addGroup(){this.$store.state.competitions[this.$store.state.currentCompetitionPos].hasOwnProperty("groups")||(this.$store.state.competitions[this.$store.state.currentCompetitionPos].groups=[]);let t={id:1+this.$store.state.competitions[this.$store.state.currentCompetitionPos].groups.length,name:this.groupName};console.log(t),this.$store.state.competitions[this.$store.state.currentCompetitionPos].groups.push(t),this.groupName=""},deleteSportsman(t){this.$store.state.competitions[this.$store.state.currentCompetitionPos].queue.splice(this.$store.state.competitions[this.$store.state.currentCompetitionPos].queue.indexOf(t),1),this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmens.splice(this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmens.map(function(t){return t.id}).indexOf(t),1)},editSportsman(t){this.changeSportsmenId=t;let e=this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmens.map(function(t){return t.id}).indexOf(t);this.changeSportsmen=this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmens[e],this.sheet=!0},insertSportsmenToQueue(){console.log("insertSportsmenToQueue");let t=parseInt(this.number)+parseInt(1e3*this.groupId),e=this.$store.state.competitions[this.$store.state.currentCompetitionPos].queue;for(let o=0;o<e.length;o++){let s=e[o],i=this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmens.find(t=>t.id===s);if(console.log("!",t,parseInt(i.id)+parseInt(1e3*i.groupId)),t<parseInt(i.id)+parseInt(1e3*i.groupId))return console.log("буду включать спортсмена id=",this.number," pos=",o,"q=",e,"posMetric=",t,"s=",i,"this.number=",this.number,"this.groupId=",this.groupId),e.splice(o,0,this.number),console.log(e),o}return this.$store.state.competitions[this.$store.state.currentCompetitionPos].queue.push(this.number),0},addSprtsman(){let t={id:this.number,name:this.name,time1:null,time2:null,commonTime:null,year:this.year,code:this.code,groupId:this.groupId,city:this.city,title:this.title};this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmens.push(t),0===this.$store.state.competitions[this.$store.state.currentCompetitionPos].queue.length?this.$store.state.competitions[this.$store.state.currentCompetitionPos].queue.push(t.id):this.insertSportsmenToQueue(),this.clearForm(),this.saveCompetition(),console.log("store",this.$store)},clearForm(){this.$refs.form.reset(),this.valid=!1,this.number="",this.name=""},fixNumber(){this.$nextTick(()=>{this.number=this.number.trim().replace(/[^+\d]/g,"").replace(/^0+/g,"")})},saveCompetition(){this.$store.dispatch("saveCompetitionChange",this.$store.state.competitions[this.$store.state.currentCompetitionPos])},fixName(){this.$nextTick(()=>{this.name=this.name.charAt(0).toUpperCase()+this.name.slice(1)})}}},A=L,B=o("288c"),J=o("4bd4"),G=o("b974"),K=o("8dd9"),U=o("1f4f"),Q=o("8654"),W=Object(l["a"])(A,F,E,!1,null,null,null),X=W.exports;m()(W,{VBottomSheet:B["a"],VBtn:k["a"],VCard:I["a"],VCol:O["a"],VContainer:d["a"],VFlex:N["a"],VForm:J["a"],VIcon:v["a"],VLayout:R["a"],VRow:z["a"],VSelect:G["a"],VSheet:K["a"],VSimpleTable:U["a"],VTextField:Q["a"]});var H=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",[o("v-layout",{attrs:{row:""}},[o("v-flex",{attrs:{xs12:""}},[o("h2",[t._v("Результаты")]),t._l(t.sportsmensByGroups,function(e){return e.sportsmens.length>0?o("div",{key:e.groupId},[o("div",{staticStyle:{"margin-top":"10px"}},[o("h4",[t._v(t._s(e.groupName))])]),o("v-card",[o("v-list",[o("div",[o("v-list-item",[o("v-list-item-content",[o("v-row",{staticClass:"spacer",attrs:{align:"center","no-gutters":""}},[o("v-col",{attrs:{cols:"1"}},[o("p",{staticClass:"d-none d-sm-flex"},[t._v("Место")]),o("p",{staticClass:"d-sm-none"},[o("v-icon",[t._v("format_list_numbered")])],1)]),o("v-col",{attrs:{cols:"2",sm:"1",align:"center"}},[o("p",{staticClass:"d-none d-sm-flex",staticStyle:{"margin-right":"5px"}},[t._v("№ майки")]),o("p",{staticClass:"d-sm-none",staticStyle:{"margin-right":"5px"}},[o("v-icon",[t._v("person_outline")])],1)]),o("v-col",{staticClass:"d-none d-sm-flex",attrs:{sm:"3"}},[o("p",[t._v("Имя")])]),o("v-col",{staticStyle:{"min-width":"85px",padding:"5px"},attrs:{cols:"2",sm:"2"}},[o("v-layout",{attrs:{"justify-center":""}},[o("p",{staticClass:"d-sm-none text-center"},[o("v-icon",[t._v("av_timer")]),t._v(" 1")],1)]),o("v-layout",{attrs:{"justify-center":""}},[o("p",{staticClass:"d-none d-sm-flex text-center",staticStyle:{"font-size":"90%"}},[t._v("Время 1")])])],1),o("v-col",{staticStyle:{"min-width":"85px",padding:"5px"},attrs:{cols:"2",sm:"2"}},[o("v-layout",{attrs:{"justify-center":""}},[o("p",{staticClass:"d-sm-none text-center"},[o("v-icon",[t._v("av_timer")]),t._v(" 2")],1)]),o("v-layout",{attrs:{"justify-center":""}},[o("p",{staticClass:"d-none d-sm-flex text-center",staticStyle:{"font-size":"90%"}},[t._v("Время 2")])])],1),o("v-col",{staticClass:"red--text",attrs:{cols:"2",sm:"2"}},[o("v-layout",{attrs:{"justify-center":""}},[o("p",{staticClass:"d-sm-none text-xs-center",staticStyle:{"font-size":"90%"}},[t._v("Итог")])]),o("v-layout",{attrs:{"justify-center":""}},[o("p",{staticClass:"d-none d-sm-flex text-xs-center"},[t._v("Итог")])])],1)],1)],1)],1),o("v-divider")],1),t._l(e.sportsmens,function(s,i){return o("div",{key:s.id},[o("v-list-item",[o("v-list-item-content",[o("v-row",{staticClass:"spacer",attrs:{align:"center","no-gutters":""}},[o("v-col",{staticClass:"d-sm-none",staticStyle:{"margin-bottom":"7px"},attrs:{cols:"12",align:"center"}},[o("h4",[t._v(t._s(s.fio))])]),o("v-col",{attrs:{cols:"1"}},[o("h4",[t._v(t._s(i+1))])]),o("v-col",{attrs:{cols:"2",sm:"1",align:"center"}},[o("div",{staticClass:"t-shirt"},[o("v-layout",{attrs:{"justify-center":""}},[o("span",{staticClass:"white--text headline"},[t._v(t._s(s.number))])])],1)]),o("v-col",{staticClass:"d-none d-sm-flex",attrs:{sm:"3"}},[o("h4",[t._v(t._s(s.fio))])]),o("v-col",{staticStyle:{"min-width":"85px",padding:"5px"},attrs:{cols:"2",sm:"2"}},[o("h4",{staticClass:"text-center"},[t._v(t._s(t.formatTime(s.inputTime)))])]),o("v-col",{staticStyle:{"min-width":"85px",padding:"5px"},attrs:{cols:"2",sm:"2"}},[o("h4",{staticClass:"text-center"},[t._v(t._s(t.formatTime(s.inputTime2)))])]),o("v-col",{staticClass:"red--text",attrs:{cols:"2",sm:"2"}},[o("h4",{staticClass:"text-center"},[t._v(t._s(t.formatTime(s.rezToPrintCommon)))])])],1)],1)],1),i<e.sportsmens.length-1?o("v-divider"):t._e()],1)})],2)],1)],1):t._e()}),o("h1",{staticStyle:{display:"none"}},[t._v("Старые результаты")]),o("v-card",{staticStyle:{display:"none"}},[o("v-list",[o("div",[o("v-list-item",[o("v-list-item-content",[o("v-row",{staticClass:"spacer",attrs:{align:"center","no-gutters":""}},[o("v-col",{attrs:{cols:"1"}},[o("p",{staticClass:"d-none d-sm-flex"},[t._v("Место")]),o("p",{staticClass:"d-sm-none"},[o("v-icon",[t._v("format_list_numbered")])],1)]),o("v-col",{staticStyle:{"min-width":"55px"},attrs:{cols:"1",lg:"1"}},[o("p",{staticStyle:{"margin-right":"5px"}},[t._v("Номер"),o("br"),t._v("майки")])]),o("v-col",[o("p",[t._v("Имя")])]),o("v-col",{staticStyle:{"min-width":"85px",padding:"5px"},attrs:{cols:"2",sm:"1"}},[o("v-layout",{attrs:{"justify-center":""}},[o("p",{staticClass:"d-sm-none d-md-flex text-center"},[t._v("Время 1")])]),o("v-layout",{attrs:{"justify-center":""}},[o("p",{staticClass:"d-none d-sm-flex d-md-none text-center",staticStyle:{"font-size":"90%"}},[t._v("Время 1")])])],1),o("v-col",{staticStyle:{"min-width":"85px",padding:"5px"},attrs:{cols:"2",sm:"1"}},[o("v-layout",{attrs:{"justify-center":""}},[o("p",{staticClass:"d-sm-none d-md-flex text-center"},[t._v("Время 2")])]),o("v-layout",{attrs:{"justify-center":""}},[o("p",{staticClass:"d-none d-sm-flex d-md-none text-center",staticStyle:{"font-size":"90%"}},[t._v("Время 2")])])],1),o("v-col",{staticClass:"red--text",staticStyle:{"min-width":"85px",padding:"5px"},attrs:{cols:"2",md:"1"}},[o("v-layout",{attrs:{"justify-center":""}},[o("p",{staticClass:"d-sm-none text-xs-center",staticStyle:{"font-size":"90%"}},[t._v("Результат")])]),o("v-layout",{attrs:{"justify-center":""}},[o("p",{staticClass:"d-none d-sm-flex text-xs-center"},[t._v("Результат")])])],1)],1)],1)],1),o("v-divider")],1),t._l(t.sportsmens,function(e,s){return o("div",{key:e.id},[o("v-list-item",[o("v-list-item-content",[o("v-row",{staticClass:"spacer",attrs:{align:"center","no-gutters":""}},[o("v-col",{attrs:{cols:"1"}},[o("h4",[t._v(t._s(e.place+1))])]),o("v-col",{staticStyle:{"min-width":"55px"},attrs:{cols:"1",lg:"1"}},[o("div",{staticClass:"t-shirt"},[o("v-layout",{attrs:{"justify-center":""}},[o("span",{staticClass:"white--text headline"},[t._v(t._s(e.id))])])],1)]),o("v-col",[o("h4",[t._v(t._s(e.name))])]),o("v-col",{staticStyle:{"min-width":"85px",padding:"5px"},attrs:{cols:"2",sm:"1"}},[o("h4",{staticClass:"text-center"},[t._v(t._s(t.formatTime(e.t1)))])]),o("v-col",{staticStyle:{"min-width":"85px",padding:"5px"},attrs:{cols:"2",sm:"1"}},[o("h4",{staticClass:"text-center"},[t._v(t._s(t.formatTime(e.t2)))])]),o("v-col",{staticClass:"red--text",staticStyle:{"min-width":"85px",padding:"5px"},attrs:{cols:"2",md:"1"}},[o("h4",{staticClass:"text-center"},[t._v(t._s(t.formatTime(e.t)))])])],1)],1)],1),s<t.sportsmens.length-1?o("v-divider"):t._e()],1)})],2)],1),o("v-btn",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{large:"",color:"primary",to:"/protocol"}},[t._v("Протокол")])],2)],1)],1)},Y=[];function Z(t){t.t1="--.--",t.t2="--.--",null!==t.time1&&(t.t1=t.time1),null!==t.time2&&(t.t2=t.time2),0===t.time1&&(t.t1=t.disqualifyType1),0===t.time2&&(t.t2=t.disqualifyType2)}var tt={data:()=>({}),computed:{sportsmens(){console.log("contestResult > computed > sportsmens start");let t=[...this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmens];t.forEach(t=>{null===t.time1&&null===t.time2||(t.commonTime=0),null!==t.time1&&(t.commonTime+=t.time1,t.commonTime=Math.round(1e3*t.commonTime)/1e3),null!==t.time2&&(t.commonTime+=t.time2,t.commonTime=Math.round(1e3*t.commonTime)/1e3),0!==t.time1&&0!==t.time2||(t.commonTime=0),null===t.commonTime?t.t="--.--":0===t.commonTime?0===t.time1?t.t=t.disqualifyType1:t.t=t.disqualifyType2:t.t=t.commonTime,Z(t)}),t.sort((t,e)=>{return 0===t.commonTime&&0===e.commonTime?t.id>e.id?1:-1:0===t.commonTime?1:0===e.commonTime?-1:null!==t.commonTime&&null===e.commonTime?-1:null===t.commonTime&&null!==e.commonTime?1:null!==t.time2&&null===e.time2?-1:null===t.time2&&null!==e.time2?1:t.commonTime>e.commonTime?1:t.commonTime===e.commonTime&&t.id>e.id?1:-1});for(const[e,o]of t.entries())o.place=e;return t},sportsmensByGroups(){console.log("contestResult > computed > sportsmensByGroups start");let t=[];for(let e of this.$store.state.competitions[this.$store.state.currentCompetitionPos].groups){console.log("группа"),console.log(e);let o=[],s=[...this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmens];s=s.filter(t=>t.groupId==e.id),s.sort(function(t,e){return t.ct=e.ct=0,t.time1?t.ct+=t.time1:t.ct+=1e6,t.time2?t.ct+=t.time2:t.ct+=1e6,e.time1?e.ct+=e.time1:e.ct+=1e6,e.time2?e.ct+=e.time2:e.ct+=1e6,t.ct-e.ct}),s.forEach(t=>{t.inputTime=this.formatTime(t.t1),t.inputTime2=this.formatTime(t.t2),t.rezToPrintCommon=this.formatTime(t.t)}),console.log(e.id),console.log("спортсмены"),console.log(s);for(let t of s)console.log("перебор спортсменов"),console.log(t),o.push({number:t.id,code:"",fio:t.name,year:t.year,city:t.city,title:t.title,inputTime:t.inputTime,inputTime2:t.inputTime2,rezToPrintCommon:t.rezToPrintCommon});t.push({groupId:e.id,groupName:e.name,sportsmens:o})}return t}},methods:{formatTime(t=""){return""==t?t:t<60?t:t<3600?Math.floor(t/60)+"."+(t-60*Math.floor(t/60)).toFixed(3):t}},created(){console.log("created contestResult")}},et=tt,ot=o("8860"),st=o("da13"),it=o("5d23"),nt=Object(l["a"])(et,H,Y,!1,null,null,null),rt=nt.exports;m()(nt,{VBtn:k["a"],VCard:I["a"],VCol:O["a"],VContainer:d["a"],VDivider:V["a"],VFlex:N["a"],VIcon:v["a"],VLayout:R["a"],VList:ot["a"],VListItem:st["a"],VListItemContent:it["a"],VRow:z["a"]});var at=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"protocol"}},[o("table",{staticClass:"top-table",staticStyle:{width:"100%"}},[o("tbody",[o("tr",[o("td",{staticClass:"top-table left",attrs:{colspan:"2"}},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.competitions[t.$store.state.currentCompetitionPos].protocol.head,expression:"$store.state.competitions[$store.state.currentCompetitionPos].protocol.head"}],staticStyle:{border:"none",resize:"none",height:"50px",width:"100%","font-size":"16px","font-family":"sans-serif"},style:t.textarea2,domProps:{value:t.$store.state.competitions[t.$store.state.currentCompetitionPos].protocol.head},on:{input:function(e){e.target.composing||t.$set(t.$store.state.competitions[t.$store.state.currentCompetitionPos].protocol,"head",e.target.value)}}})])])])]),t._l(t.sportsmensByGroups,function(e){return o("div",{key:e.groupId},[o("div",{staticStyle:{"page-break-inside":"avoid"}},[o("div",[o("p",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.groupName,expression:"group.groupName"}],attrs:{type:"text",size:"50"},domProps:{value:e.groupName},on:{input:function(o){o.target.composing||t.$set(e,"groupName",o.target.value)}}})])]),o("table",[o("tbody",[t._m(0,!0),t._m(1,!0),t._l(e.sportsmens,function(e,s){return o("tr",[o("td",[t._v(t._s(s+1))]),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.number,expression:"line.number"}],attrs:{type:"text",size:"3"},domProps:{value:e.number},on:{input:function(o){o.target.composing||t.$set(e,"number",o.target.value)}}})]),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"line.code"}],attrs:{type:"text",size:"4"},domProps:{value:e.code},on:{input:function(o){o.target.composing||t.$set(e,"code",o.target.value)}}})]),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.fio,expression:"line.fio"}],attrs:{type:"text",size:"25"},domProps:{value:e.fio},on:{input:function(o){o.target.composing||t.$set(e,"fio",o.target.value)}}})]),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.year,expression:"line.year"}],attrs:{type:"text",size:"4"},domProps:{value:e.year},on:{input:function(o){o.target.composing||t.$set(e,"year",o.target.value)}}})]),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"line.title"}],attrs:{type:"text",size:"3"},domProps:{value:e.title},on:{input:function(o){o.target.composing||t.$set(e,"title",o.target.value)}}})]),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.city,expression:"line.city"}],attrs:{type:"text",size:"7"},domProps:{value:e.city},on:{input:function(o){o.target.composing||t.$set(e,"city",o.target.value)}}})]),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.inputTime,expression:"line.inputTime"}],attrs:{type:"text",size:"8"},domProps:{value:e.inputTime},on:{blur:function(o){return t.checkdisqalify(e.number,e.inputTime,e.inputTime2)},input:function(o){o.target.composing||t.$set(e,"inputTime",o.target.value)}}})]),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.inputTime2,expression:"line.inputTime2"}],attrs:{type:"text",size:"8"},domProps:{value:e.inputTime2},on:{blur:function(o){return t.checkdisqalify(e.number,e.inputTime,e.inputTime2)},input:function(o){o.target.composing||t.$set(e,"inputTime2",o.target.value)}}})]),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.rezToPrintCommon,expression:"line.rezToPrintCommon"}],attrs:{type:"text",size:"8"},domProps:{value:e.rezToPrintCommon},on:{input:function(o){o.target.composing||t.$set(e,"rezToPrintCommon",o.target.value)}}})]),t._m(2,!0),t._m(3,!0)])})],2)])])])}),o("table",{staticClass:"top-table",staticStyle:{width:"100%"}},[o("tbody",[o("tr",[o("td",{staticClass:"top-table left",attrs:{colspan:"2"}},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.competitions[t.$store.state.currentCompetitionPos].protocol.footer,expression:"$store.state.competitions[$store.state.currentCompetitionPos].protocol.footer"}],staticStyle:{border:"none",resize:"none",height:"50px",width:"100%","font-size":"16px","font-family":"sans-serif"},style:t.textarea1,domProps:{value:t.$store.state.competitions[t.$store.state.currentCompetitionPos].protocol.footer},on:{input:function(e){e.target.composing||t.$set(t.$store.state.competitions[t.$store.state.currentCompetitionPos].protocol,"footer",e.target.value)}}})])])])]),o("br"),o("br"),o("v-row",{attrs:{align:"center"}},[o("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[o("v-btn",{attrs:{large:"",color:"primary"},on:{click:function(e){return e.preventDefault(),t.printProtocol()}}},[t._v("Печать")])],1)],1)],2)},lt=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("tr",[o("td",{attrs:{rowspan:"2"}},[t._v("место")]),o("td",{attrs:{rowspan:"2"}},[t._v("старт номер")]),o("td",{attrs:{rowspan:"2"}},[t._v("рус код/"),o("br"),t._v("фис код")]),o("td",{attrs:{rowspan:"2"}},[t._v("Фамилия, имя"),o("br"),t._v("спортсмена")]),o("td",{attrs:{rowspan:"2"}},[t._v("год"),o("br"),t._v("рожд.")]),o("td",{attrs:{rowspan:"2"}},[t._v("Звание,"),o("br"),t._v("разряд")]),o("td",{attrs:{rowspan:"2"}},[t._v("Субъект РФ")]),o("td",{attrs:{colspan:"3"}},[t._v("Результат")]),o("td",{attrs:{rowspan:"2"}},[t._v("очки сор.")]),o("td",{attrs:{rowspan:"2"}},[t._v("вып. раз.")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("tr",[o("td",[t._v("1трасса"),o("br"),t._v("мин.сек.")]),o("td",[t._v("2 трасса"),o("br"),t._v("мин.сек.")]),o("td",[t._v("сумма"),o("br"),t._v("мин.сек.")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("td",[o("input",{attrs:{type:"text",size:"4"}})])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("td",[o("input",{attrs:{type:"text",size:"4"}})])}];function ct(t){t.t1="--.--",t.t2="--.--",null!==t.time1&&(t.t1=t.time1),null!==t.time2&&(t.t2=t.time2),0===t.time1&&(t.t1=t.disqualifyType1),0===t.time2&&(t.t2=t.disqualifyType2)}var mt={name:"Protocol",methods:{formatTime(t=""){return""==t?t:t<60?t:t<3600?Math.floor(t/60)+"."+(t-60*Math.floor(t/60)).toFixed(3):t},updateTimes(t){t.t2="--.--",null!==t.time1&&(t.t1=t.time1),null!==t.time2&&(t.t2=t.time2),0===t.time1&&(t.t1=t.disqualifyType1),0===t.time2&&(t.t2=t.disqualifyType2);let e=[...this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmens];e.forEach(t=>{null===t.time1&&null===t.time2||(t.commonTime=0),null!==t.time1&&(t.commonTime+=t.time1,t.commonTime=Math.round(1e3*t.commonTime)/1e3),null!==t.time2&&(t.commonTime+=t.time2,t.commonTime=Math.round(1e3*t.commonTime)/1e3),0!==t.time1&&0!==t.time2||(t.commonTime=0),null===t.commonTime?t.t="--.--":0===t.commonTime?0===t.time1?t.t=t.disqualifyType1:t.t=t.disqualifyType2:t.t=t.commonTime,ct(t)}),e.sort((t,e)=>{return 0===t.commonTime&&0===e.commonTime?t.id>e.id?1:-1:0===t.commonTime?1:0===e.commonTime?-1:null!==t.commonTime&&null===e.commonTime?-1:null===t.commonTime&&null!==e.commonTime?1:null!==t.time2&&null===e.time2?-1:null===t.time2&&null!==e.time2?1:t.commonTime>e.commonTime?1:t.commonTime===e.commonTime&&t.id>e.id?1:-1});for(const[o,s]of e.entries())s.place=o},printProtocol(){this.$store.dispatch("saveCompetitionChange",this.$store.state.competitions[this.$store.state.currentCompetitionPos]),console.log("печатаем протокол"),window.print()},test(){this.$store.state.competitions[this.$store.state.currentCompetitionPos].protocol={head:"Заполните форму",footer:"Заполните форму"}},checkdisqalify(t,e,o){if(console.log("checkdisqalify"),console.log(t),console.log(e),console.log(o),e=""+e,o=""+o,-1!==e.indexOf("Д")||-1!==e.indexOf("д")||-1!==e.indexOf("D")||-1!==e.indexOf("d")){let o=this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmens.find(e=>e.id===t);-1!==e.indexOf("DNS")||-1!==e.indexOf("dns")?o.disqualifyType1="DNS":-1!==e.indexOf("DNF")||-1!==e.indexOf("dnf")?o.disqualifyType1="DNF":o.disqualifyType1="DSQ",console.log(o),o.time1=0,this.updateTimes(o),this.$store.dispatch("saveCompetitionChange",this.$store.state.competitions[this.$store.state.currentCompetitionPos])}if(-1!==o.indexOf("Д")||-1!==o.indexOf("д")||-1!==o.indexOf("D")||-1!==o.indexOf("d")){let e=this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmens.find(e=>e.id===t);-1!==o.indexOf("DNS")||-1!==o.indexOf("dns")?e.disqualifyType2="DNS":-1!==o.indexOf("DNF")||-1!==o.indexOf("dnf")?e.disqualifyType2="DNF":e.disqualifyType2="DSQ",console.log(e),e.time2=0,this.updateTimes(e),this.$store.dispatch("saveCompetitionChange",this.$store.state.competitions[this.$store.state.currentCompetitionPos])}}},computed:{sportsmensByGroups(){let t=[];console.log("группы"),console.log(this.$store.state.competitions[this.$store.state.currentCompetitionPos]);for(let e of this.$store.state.competitions[this.$store.state.currentCompetitionPos].groups){console.log("группа"),console.log(e);let o=[],s=[...this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmens];s=s.filter(t=>t.groupId==e.id),s.sort(function(t,e){return t.ct=e.ct=0,t.time1?t.ct+=t.time1:t.ct+=1e6,t.time2?t.ct+=t.time2:t.ct+=1e6,e.time1?e.ct+=e.time1:e.ct+=1e6,e.time2?e.ct+=e.time2:e.ct+=1e6,t.ct-e.ct}),s.forEach(t=>{t.inputTime=this.formatTime(t.t1),t.inputTime2=this.formatTime(t.t2),t.rezToPrintCommon=this.formatTime(t.t)}),console.log(e.id),console.log("спортсмены"),console.log(s);for(let t of s)console.log("перебор спортсменов"),console.log(t),o.push({number:t.id,code:"",fio:t.name,year:t.year,city:t.city,title:t.title,inputTime:t.inputTime,inputTime2:t.inputTime2,rezToPrintCommon:t.rezToPrintCommon});t.push({groupId:e.id,groupName:e.name,sportsmens:o})}return t},textarea1:function(){let t=this.$store.state.competitions[this.$store.state.currentCompetitionPos].protocol.footer.split("\n").length-1,e=50+24*t;return"height: "+JSON.stringify(e)+"px; width: 100%;"},textarea2:function(){let t=this.$store.state.competitions[this.$store.state.currentCompetitionPos].protocol.head.split("\n").length-1,e=50+24*t;return"height: "+JSON.stringify(e)+"px; width: 100%;"}}},ut=mt,pt=(o("5c17"),o("d637"),Object(l["a"])(ut,at,lt,!1,null,"7d8b0a06",null)),dt=pt.exports;m()(pt,{VBtn:k["a"],VCol:O["a"],VRow:z["a"]});var ht=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",[o("v-layout",{attrs:{row:""}},[o("v-flex",{attrs:{xs12:""}},[o("h2",[t._v("Соревнования")]),o("competitions-list"),o("h2",[t._v("Создать соревнование")]),o("competition-create-form")],1)],1)],1)},vt=[],ft={name:"AdminPage",data(){return{}},computed:{},mounted(){}},gt=ft,yt=Object(l["a"])(gt,ht,vt,!1,null,"aefbcd40",null),Ct=yt.exports;m()(yt,{VContainer:d["a"],VFlex:N["a"],VLayout:R["a"]}),s["a"].use(b["a"]);var bt=new b["a"]({routes:[{path:"/",component:Ct},{path:"/start",component:M},{path:"/settings",component:X},{path:"/results",component:rt},{path:"/protocol",component:dt}]}),xt=o("2f62");s["a"].use(xt["a"]);const $t=!0;var _t=new xt["a"].Store({state:{t:1,loadServerStatus:"not connected",offline:!1,currentCompetitionPos:0,isDtmf:!1,interval:null,dataReady:!1,competitions:[{id:1,planedStartTime:null,endTime:null,numOfStages:2,penalty:0,isDisqualify:!1,title:"Тестовое соревнование",sportsmanOnRaceId:null,currentRaceTime:null,lastStartTime:null,lastSportsman:null,sportsmens:[{id:1,name:"Адам",time1:null,time2:null,commonTime:null,groupId:"2",queuePos:1,year:"2015",code:"",city:"Новинки",title:"",t1:"--.--",t2:"--.--"},{id:2,name:"Борис",time1:null,time2:null,commonTime:null,groupId:"2",queuePos:2,year:"2015",code:"",city:"Новинки",title:"",t1:"--.--",t2:"--.--"},{id:3,name:"Виктор",time1:null,time2:null,commonTime:null,groupId:"2",queuePos:3,year:"2015",code:"",city:"Новинки",title:"",t1:"--.--",t2:"--.--"},{id:4,name:"Ирина",time1:null,time2:null,commonTime:null,groupId:"1",queuePos:4,year:"2015",code:"",city:"Новинки",title:"",t1:"--.--",t2:"--.--"},{id:5,name:"Ева",time1:null,time2:null,commonTime:null,groupId:"1",queuePos:5,year:"2015",code:"",city:"Новинки",title:"",t1:"--.--",t2:"--.--"},{id:6,name:"Егор",time1:null,time2:null,commonTime:null,groupId:"3",queuePos:6,year:"2012",code:"",city:"Новинки",title:"",t1:"--.--",t2:"--.--"},{id:7,name:"Жанна",time1:null,time2:null,commonTime:null,groupId:"1",queuePos:7,year:"2015",code:"",city:"Новинки",title:"",t1:"--.--",t2:"--.--"},{id:8,name:"Владимир",time1:null,time2:null,commonTime:null,groupId:"3",queuePos:8,year:"2012",code:"",city:"Новинки",title:"",t1:"--.--",t2:"--.--"},{id:9,name:"Иван",time1:null,time2:null,commonTime:null,groupId:"2",queuePos:9,year:"2015",code:"",city:"Новинки",title:"",t1:"--.--",t2:"--.--"},{id:10,name:"Катерина",time1:null,time2:null,commonTime:null,groupId:"1",queuePos:10,year:"2015",code:"",city:"Новинки",title:"",t1:"--.--",t2:"--.--"}],groups:[{id:1,name:"Девочки 2015 - 2014"},{id:2,name:"Мальчики 2015 - 2014"},{id:3,name:"Мальчики 2013 - 2012"}],queue:[4,5,7,10,1,2,3,9,6,8],raiting:[],protocol:{head:"Введите сюда шапку протокола",footer:"Введите информацию о соревновании"}}]},mutations:{getInitData(t,e){console.log("getInitData"),t.dataReady=!0,console.log(e),console.log(e.competitions),console.log(e.competitions[0].data_json),console.log(JSON.parse(e.competitions[0].data_json)),t.competitions=e.competitions.map(t=>{let e=JSON.parse(t.data_json);return e.uniqueLink=t.unique_link,e}),console.log("getInitData - currentCompetitionId"),console.log(e.currentCompetitionId),t.currentCompetitionPos=t.competitions.findIndex(t=>t.id===e.currentCompetitionId)},addCompetition(t,e){console.log("addCompetition"),console.log(e),t.competitions.push(e)},deleteCompetition(t,e){console.log("deleteCompetition");let o=t.competitions.map(t=>{return t.id}).indexOf(e.id);console.log(o),t.competitions.splice(o,1)}},actions:{deleteCompetition(t,e){console.log("action deleteCompetition");let o=JSON.stringify({id:e.id});if($t)return t.commit("deleteCompetition",e),0;axios.post("competition-delete",{data:o,token:localStorage["token"]}).then(o=>{console.log(o),t.commit("deleteCompetition",e)}).catch(o=>{console.error(o),t.commit("deleteCompetition",e)})},getInitData(t){if($t)return 0;axios.post("get-init-data",{data:""}).then(e=>{console.log("init data"),console.log(e),t.commit("getInitData",e.data),this.state.offline=!1}).catch(t=>{console.error(t),this.state.offline=!0})},saveCompetitionChange(t,e){if($t)return 0;console.log("action changeCompetition"),console.log(e);let o=JSON.stringify({id:e.id,competition:e});axios.post("competition-change",{data:o,token:localStorage["token"]}).then(t=>{console.log(t),this.state.offline=!1}).catch(t=>{console.error(t),this.state.offline=!0})},addCompetition(t,e){if(console.log("action"),console.log(e),t.commit("addCompetition",e),$t)return 0;let o=JSON.stringify(e);axios.post("competition-create",{data:o,token:localStorage["token"]}).then(t=>{console.log(t),e.id=t.data,this.state.offline=!1}).catch(t=>{console.error(t),this.state.offline=!0})},setCurrentCompetitionId(t,e){if($t)return 0;console.log("setCurrentCompetitionId"),console.log(e),axios.post("set-current-competition-id",{data:e,token:localStorage["token"]}).then(t=>{console.log(t),this.state.offline=!1}).catch(t=>{console.error(t),this.state.offline=!0})}}}),Tt=o("f309");o("bf40");s["a"].use(Tt["a"]);var wt=new Tt["a"]({icons:{iconfont:"mdi"}}),Pt=o("1dce"),jt=o.n(Pt),St=(o("d1e7"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div")}),kt=[],It={name:"Axios",data(){return{intervalid1:null}},mounted(){localStorage["competitions"]&&(this.$store.state.competitions=JSON.parse(localStorage["competitions"])),this.intervalid1=setInterval(function(){localStorage["competitions"]=JSON.stringify(this.$store.state.competitions)}.bind(this),1e4),console.log("пытаюсь получить данные"),console.log(this.$store.state.competitions),this.$store.dispatch("getInitData"),setInterval(()=>{this.$store.dispatch("saveCompetitionChange",this.$store.state.competitions[this.$store.state.currentCompetitionPos])},6e4)},methods:{test(){console.log("i'm axios")}}},qt=It,Ot=Object(l["a"])(qt,St,kt,!1,null,"297defef",null),Vt=Ot.exports,Nt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-list",{attrs:{dense:""}},[o("v-list-item",{attrs:{to:"/"}},[o("v-list-item-action",[o("v-icon",[t._v("home")])],1),o("v-list-item-content",[o("v-list-item-title",[t._v("Личный кабинет")])],1)],1),o("v-list-item",{attrs:{to:"/settings"}},[o("v-list-item-action",[o("v-icon",[t._v("settings")])],1),o("v-list-item-content",[o("v-list-item-title",[t._v("Соревнование")])],1)],1),o("v-list-item",{attrs:{to:"/start"}},[o("v-list-item-action",[o("v-icon",[t._v("play_arrow")])],1),o("v-list-item-content",[o("v-list-item-title",[t._v("Дать старт")])],1)],1),o("v-list-item",{attrs:{to:"/results"}},[o("v-list-item-action",[o("v-icon",[t._v("format_list_numbered")])],1),o("v-list-item-content",[o("v-list-item-title",[t._v("Результаты")])],1)],1)],1)},Rt=[],zt={name:"AppMenu"},Dt=zt,Mt=o("1800"),Ft=Object(l["a"])(Dt,Nt,Rt,!1,null,"71427e7d",null),Et=Ft.exports;m()(Ft,{VIcon:v["a"],VList:ot["a"],VListItem:st["a"],VListItemAction:Mt["a"],VListItemContent:it["a"],VListItemTitle:it["b"]});var Lt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-bottom-navigation",{attrs:{"background-color":"blue",dark:""},model:{value:t.bottomNav,callback:function(e){t.bottomNav=e},expression:"bottomNav"}},[o("v-btn",{attrs:{value:"home",to:"/"}},[o("v-icon",[t._v("home")])],1),o("v-btn",{attrs:{value:"settings",to:"/settings"}},[o("v-icon",[t._v("settings")])],1),o("v-btn",{attrs:{value:"start",to:"/start"}},[o("v-icon",[t._v("play_arrow")])],1),o("v-btn",{attrs:{value:"results",to:"/results"}},[o("v-icon",[t._v("format_list_numbered")])],1)],1)},At=[],Bt={name:"AppBottomMenu",data(){return{bottomNav:"Recent"}}},Jt=Bt,Gt=o("b81c"),Kt=Object(l["a"])(Jt,Lt,At,!1,null,"15fc7352",null),Ut=Kt.exports;m()(Kt,{VBottomNavigation:Gt["a"],VBtn:k["a"],VIcon:v["a"]});var Qt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-card",[o("v-list",t._l(t.competitions,function(e,s){return o("div",{key:e.id},[o("v-list-item",[o("v-list-item-content",[o("v-row",{staticClass:"spacer",attrs:{align:"center","no-gutters":""}},[o("v-col",{staticClass:"col-5",on:{click:function(e){return t.selectCompetition(s)}}},[o("h4",[t._v(t._s(e.title))])]),o("v-col",{staticClass:"hidden-sm-and-down",attrs:{cols:"2"}},[o("a",{on:{click:function(o){return o.preventDefault(),t.deleteCompetition(e)}}},[t._v("Удалить")])]),o("v-col",{staticClass:"hidden-sm-and-down",attrs:{cols:"2"}},[o("a",{on:{click:function(o){return o.preventDefault(),t.copyCompetition(e)}}},[t._v("Дублировать")])]),o("v-col",{staticClass:"hidden-md-and-up",attrs:{cols:"2"}},[o("a",{on:{click:function(o){return o.preventDefault(),t.deleteCompetition(e)}}},[o("v-icon",{attrs:{large:"",color:"red"}},[t._v("delete_forever")])],1)]),o("v-col",{staticClass:"hidden-md-and-up",attrs:{cols:"2"}},[o("a",{on:{click:function(o){return o.preventDefault(),t.copyCompetition(e)}}},[o("v-icon",{attrs:{large:"",color:"blue"}},[t._v("control_point_duplicate")])],1)])],1)],1)],1),s<t.competitions.length-1?o("v-divider"):t._e()],1)}),0)],1)},Wt=[],Xt={name:"CompetitionsList",computed:{competitions(){return this.$store.state.competitions}},methods:{deleteCompetition(t){this.$store.dispatch("deleteCompetition",t)},copyCompetition(t){let e=[];for(let s of t.sportsmens)e.push({id:s.id,name:s.name,year:s.year,code:s.code,city:s.city,title:s.title,time1:null,time2:null,commonTime:null,groupId:s.groupId});console.log(e);let o={id:1e6+Math.floor(1e6*Math.random()),title:t.title,planedStartTime:t.planedStartTime,endTime:null,numOfStages:t.numOfStages,penalty:t.penalty,isDisqualify:t.isDisqualify,protocol:{head:t.protocol.head,footer:t.protocol.footer},sportsmens:e,groups:[...t.groups],queue:[...t.queue],raiting:[],sportsmanOnRaceId:null,currentRaceTime:null,lastStartTime:null,lastSportsman:null};this.$store.dispatch("addCompetition",o)},selectCompetition(t){if(console.log(t),this.$store.state.currentCompetitionPos=t,this.$store.dispatch("setCurrentCompetitionId",this.$store.state.competitions[this.$store.state.currentCompetitionPos].id),0===this.$store.state.competitions[this.$store.state.currentCompetitionPos].sportsmens.length)return this.$router.push("/settings"),0;this.$router.push("/start")}}},Ht=Xt,Yt=Object(l["a"])(Ht,Qt,Wt,!1,null,"655a9564",null),Zt=Yt.exports;m()(Yt,{VCard:I["a"],VCol:O["a"],VDivider:V["a"],VIcon:v["a"],VList:ot["a"],VListItem:st["a"],VListItemContent:it["a"],VRow:z["a"]});var te=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-card",[o("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[o("v-container",[o("v-row",[o("v-col",{staticClass:"col-12 col-sm-9"},[o("v-text-field",{attrs:{rules:t.titleRules,label:"Название соревнования",required:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),o("v-col",{staticClass:"col-12 col-sm-3 text-center text-sm-right",staticStyle:{"margin-top":"10px"}},[o("v-btn",{attrs:{color:"primary",disabled:!t.valid},on:{click:t.addCompetition}},[t._v("Добавить")])],1)],1),o("v-btn",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{color:"primary"},on:{click:function(e){return e.preventDefault(),t.addTestCompetition()}}},[t._v("Добавить тестовое соревнование")])],1)],1)],1)},ee=[],oe={name:"CompetitionCreateForm",data(){return{valid:!1,title:"",planedStartTime:null,numOfStages:2,penalty:0,isDisqualify:!1,titleRules:[t=>!!t||"Введите название соревнования",t=>t.length<=50||"Не более 50 знаков"]}},methods:{addCompetition(){let t={id:1e6+Math.floor(1e6*Math.random()),title:this.title,planedStartTime:this.planedStartTime,endTime:null,numOfStages:2,penalty:0,isDisqualify:!1,sportsmanOnRaceId:null,currentRaceTime:null,lastStartTime:null,lastSportsman:null,protocol:{head:"Заполните форму",footer:"Заполните форму"},sportsmens:[],queue:[],raiting:[]};this.$store.dispatch("addCompetition",t),this.clearForm()},addTestCompetition(){let t={id:1e6+Math.floor(1e6*Math.random()),planedStartTime:null,endTime:null,numOfStages:2,penalty:0,isDisqualify:!1,title:"Тестовое соревнование",sportsmanOnRaceId:null,currentRaceTime:null,lastStartTime:null,lastSportsman:null,sportsmens:[{id:1,name:"Адам",time1:null,time2:null,commonTime:null,groupId:"2",queuePos:1,year:"2015",code:"",city:"Новинки",title:"",t1:"--.--",t2:"--.--"},{id:2,name:"Борис",time1:null,time2:null,commonTime:null,groupId:"2",queuePos:2,year:"2015",code:"",city:"Новинки",title:"",t1:"--.--",t2:"--.--"},{id:3,name:"Виктор",time1:null,time2:null,commonTime:null,groupId:"2",queuePos:3,year:"2015",code:"",city:"Новинки",title:"",t1:"--.--",t2:"--.--"},{id:4,name:"Ирина",time1:null,time2:null,commonTime:null,groupId:"1",queuePos:4,year:"2015",code:"",city:"Новинки",title:"",t1:"--.--",t2:"--.--"},{id:5,name:"Ева",time1:null,time2:null,commonTime:null,groupId:"1",queuePos:5,year:"2015",code:"",city:"Новинки",title:"",t1:"--.--",t2:"--.--"},{id:6,name:"Егор",time1:null,time2:null,commonTime:null,groupId:"3",queuePos:6,year:"2012",code:"",city:"Новинки",title:"",t1:"--.--",t2:"--.--"},{id:7,name:"Жанна",time1:null,time2:null,commonTime:null,groupId:"1",queuePos:7,year:"2015",code:"",city:"Новинки",title:"",t1:"--.--",t2:"--.--"},{id:8,name:"Владимир",time1:null,time2:null,commonTime:null,groupId:"3",queuePos:8,year:"2012",code:"",city:"Новинки",title:"",t1:"--.--",t2:"--.--"},{id:9,name:"Иван",time1:null,time2:null,commonTime:null,groupId:"2",queuePos:9,year:"2015",code:"",city:"Новинки",title:"",t1:"--.--",t2:"--.--"},{id:10,name:"Катерина",time1:null,time2:null,commonTime:null,groupId:"1",queuePos:10,year:"2015",code:"",city:"Новинки",title:"",t1:"--.--",t2:"--.--"}],groups:[{id:1,name:"Девочки 2015 - 2014"},{id:2,name:"Мальчики 2015 - 2014"},{id:3,name:"Мальчики 2013 - 2012"}],queue:[4,5,7,10,1,2,3,9,6,8],raiting:[],protocol:{head:"Введите сюда шапку протокола",footer:"Введите информацию о соревновании"}};this.$store.dispatch("addCompetition",t)},clearForm(){this.$refs.form.reset(),this.valid=!1,this.title="",this.planedStartTime=null,this.numOfStages=2,this.penalty=0,this.isDisqualify=!1}}},se=oe,ie=Object(l["a"])(se,te,ee,!1,null,"b81baf68",null),ne=ie.exports;m()(ie,{VBtn:k["a"],VCard:I["a"],VCol:O["a"],VContainer:d["a"],VForm:J["a"],VRow:z["a"],VTextField:Q["a"]}),s["a"].config.productionTip=!1,s["a"].use(jt.a),s["a"].component("DataUploader",Vt),s["a"].component("AppMenu",Et),s["a"].component("AppBottomMenu",Ut),s["a"].component("CompetitionsList",Zt),s["a"].component("CompetitionCreateForm",ne),s["a"].component("Protocol",dt),window.axios=o("bc3a"),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";let re=document.head.querySelector('meta[name="csrf-token"]');re?window.axios.defaults.headers.common["X-CSRF-TOKEN"]=re.content:console.error("CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token");new s["a"]({el:"#app",router:bt,store:_t,vuetify:wt,render:t=>t(C)})},"5c17":function(t,e,o){"use strict";var s=o("6b0b"),i=o.n(s);i.a},"6b0b":function(t,e,o){},"739d":function(t,e){this.DTMF=function(t){var e={};function o(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=t,o.c=e,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},o.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=3)}([function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dtmfFreqs=[[697,770,852,941],[1209,1336,1477,1633]],e.dtmfChars=[["1","2","3","A"],["4","5","6","B"],["7","8","9","C"],["*","0","#","D"]]},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var o=0;o<e.length;o++){var s=e[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,o,s){return o&&t(e.prototype,o),s&&t(e,s),e}}(),i=o(0),n=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e}return s(t,[{key:"start",value:function(t,e){if(!this._timer&&e){this.audioContext=new(window.AudioContext||window.webkitAudioContext);var o=this.audioContext.createMediaStreamSource(t),s=this.audioContext.createAnalyser();s.fftSize=1024,s.smoothingTimeConstant=0,o.connect(s);var n,r=new Uint8Array(s.frequencyBinCount),a=this.audioContext.sampleRate/r.length/2,l=0,c=this.options.duration||100,m=this.options.step||10;this._timer=setInterval(function(){s.getByteFrequencyData(r);for(var t=0,o=0;o<r.length;o++)r[o]>t&&(t=r[o]);var c=u(r,i.dtmfFreqs[0],a),p=u(r,i.dtmfFreqs[1],a);if(c>=0&&p>=0){var d=i.dtmfChars[c][p];n==d?++l>.75*m&&(e(d),l=0):l=0,n=d}},c/m)}function u(t,e,o){for(var s=0,i=-1,n=0;n<e.length;n++){var r=Math.round(e[n]/o);t[r]>s&&(s=t[r],i=n)}return i}}},{key:"stop",value:function(){clearInterval(this._timer),this._timer=null,this.audioContext&&("function"==typeof this.audioContext.close&&this.audioContext.close(),this.audioContext=null)}}]),t}();e.default=n},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var o=0;o<e.length;o++){var s=e[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,o,s){return o&&t(e.prototype,o),s&&t(e,s),e}}(),i=o(0),n=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=new(window.AudioContext||window.webkitAudioContext),s=[],n=0;n<i.dtmfFreqs[0].length;n++){for(var r=[],a=i.dtmfFreqs[0][n],l=0;l<i.dtmfFreqs[1].length;l++){var c=i.dtmfFreqs[1][l],m={};m.gain1=o.createGain(),m.gain1.gain.value=0,m.gain1.connect(o.destination),m.osc1=o.createOscillator(),m.osc1.type="sine",m.osc1.frequency.value=a,m.osc1.connect(m.gain1),m.osc2=o.createOscillator(),m.osc2.type="sine",m.osc2.frequency.value=c,m.osc2.connect(m.gain1),m.osc1.start(0),m.osc2.start(0),r.push(m)}s.push(r)}this.options=e,this.audioContext=o,this.grid=s}return s(t,[{key:"play",value:function(t,e){if(e||(e=function(){}),!t)return e();var o=t.split(""),s=this.grid,n=this.options.duration||100,r=this.options.pause||40;!function t(){var a,l,c=o.shift();if(!c)return e();t:for(a=0;a<i.dtmfChars.length;a++)for(l=0;l<i.dtmfChars[a].length;l++)if(i.dtmfChars[a][l]==c)break t;var m=s[a][l];if(!m)return e();m.gain1.gain.value=1,setTimeout(function(){m.gain1.gain.value=0,setTimeout(t,r)},n)}()}},{key:"destory",value:function(){this.audioContext&&("function"==typeof this.audioContext.close&&this.audioContext.close(),this.audioContext=null)}}]),t}();e.default=n},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Receiver=e.Sender=void 0;var s=n(o(2)),i=n(o(1));function n(t){return t&&t.__esModule?t:{default:t}}e.Sender=s.default,e.Receiver=i.default}])},c975:function(t,e,o){},d637:function(t,e,o){"use strict";var s=o("c975"),i=o.n(s);i.a}});
//# sourceMappingURL=app.91366643.js.map